# üë• –†–µ–∂–∏–º –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üîì –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç

SiteHeater –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **–æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞**. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

### ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:

1. **–í–∏–¥–µ—Ç—å –≤—Å–µ –¥–æ–º–µ–Ω—ã** - –∫–æ–º–∞–Ω–¥–∞ `/domains` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫—Ç–æ –∏—Ö –¥–æ–±–∞–≤–∏–ª
2. **–£–ø—Ä–∞–≤–ª—è—Ç—å –ª—é–±—ã–º –¥–æ–º–µ–Ω–æ–º** - –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥—Ä–µ–≤
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
   - –£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω
   - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ URL
3. **–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –í–°–ï–• –ø—Ä–æ–≥—Ä–µ–≤–∞—Ö** - –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ–≤ –ª—é–±–æ–≥–æ –¥–æ–º–µ–Ω–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—é—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞

## üì¨ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ö–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ–≤–µ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤:

```
‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–≥—Ä–µ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω

üåê –î–æ–º–µ–Ω: example.com
üïí –í—Ä–µ–º—è: 2025-01-04 15:30 UTC

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚Ä¢ –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 20
‚Ä¢ ‚úÖ –£—Å–ø–µ—à–Ω–æ: 19 (95.0%)
‚Ä¢ ‚è± –¢–∞–π–º–∞—É—Ç—ã: 1
‚Ä¢ ‚ùå –û—à–∏–±–∫–∏: 0
‚Ä¢ ‚è± –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: 0.45s
‚Ä¢ ‚è± –û–±—â–µ–µ –≤—Ä–µ–º—è: 9.12s
```

### –ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è?

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ:

- –•–æ—Ç—è –±—ã —Ä–∞–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∏ —Å –±–æ—Ç–æ–º (–æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ª—é–±—É—é –∫–æ–º–∞–Ω–¥—É)
- –ò–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `is_active = true` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è?

–í —Ñ–∞–π–ª–µ `.env` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```env
SEND_WARMING_NOTIFICATIONS=false
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
make restart
```

## üîê –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **–ù–ï–¢**:

- ‚ùå –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚ùå –†–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚ùå –ü—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥—ã, –≥–¥–µ –≤—Å–µ –¥–æ–≤–µ—Ä—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É:

- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏
- DevOps –∫–æ–º–∞–Ω–¥–∞
- –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

### 2. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞–º–∏:

- –î–æ—Å—Ç—É–ø —Å —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### 3. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:

- –õ–µ–≥–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–ª–µ–≥–∞–º
- –ù–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø—ã

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `users`:

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY,              -- Telegram user_id
    username VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP,
    last_activity TIMESTAMP
);
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

Middleware `UserRegistrationMiddleware` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏
3. –û–±–Ω–æ–≤–ª—è–µ—Ç `last_activity` timestamp

### –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∞–≤—Ç–æ–ø—Ä–æ–≥—Ä–µ–≤–∞:

1. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ë–î
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–º—É
3. –õ–æ–≥–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
4. –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã:

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤–ª–∞–¥–µ–ª—å—Ü–∞

```python
# –í handlers/domains.py
if domain.user_id != message.from_user.id:
    await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –¥–æ–º–µ–Ω—É")
    return
```

### 2. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—ã –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

```python
# –í–º–µ—Å—Ç–æ
domains = await db_manager.get_all_domains(user_id=None)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
domains = await db_manager.get_all_domains(user_id=message.from_user.id)
```

### 3. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É

```python
# –í scheduler.py
await self.bot.send_message(
    chat_id=domain.user_id,  # –í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ–º
    text=message,
    parse_mode="HTML"
)
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
make db-shell

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å
SELECT id, username, first_name, is_active, last_activity
FROM users
ORDER BY last_activity DESC;
```

### –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

```sql
UPDATE users SET is_active = false WHERE id = <user_id>;
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–†–µ–∂–∏–º –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è:**

- –î–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–æ–º–∞–Ω–¥
- –õ–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

‚ö†Ô∏è **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**

- –ü—É–±–ª–∏—á–Ω—ã—Ö –±–æ—Ç–æ–≤
- –†–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

- –†–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã Telegram API (30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ aiogram throttling –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç:

- –í—Å–µ –¥–æ–º–µ–Ω—ã
- –í—Å–µ URL
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å–µ—Ö –ø—Ä–æ–≥—Ä–µ–≤–æ–≤

–ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –¥–æ–º–µ–Ω—ã —Å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –≤ URL!

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –º–∞–ª–µ–Ω—å–∫–æ–π –∫–æ–º–∞–Ω–¥—ã (2-5 —á–µ–ª–æ–≤–µ–∫)** - —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –∏–¥–µ–∞–ª–µ–Ω
2. **–î–ª—è –±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥—ã (>10 —á–µ–ª–æ–≤–µ–∫)** - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
3. **–î–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

---

**–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: üîì –û–±—â–∏–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö**
